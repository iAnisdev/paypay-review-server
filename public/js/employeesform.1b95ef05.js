(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["employeesform"],{"045b":function(e,t,r){"use strict";r("97b3")},"229a":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"pa-4"},[r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-text-field",{attrs:{rules:e.nameRules,label:"First Name",required:""},model:{value:e.user.firstname,callback:function(t){e.$set(e.user,"firstname",t)},expression:"user.firstname"}}),r("v-text-field",{attrs:{rules:e.nameRules,label:"Last Name",required:""},model:{value:e.user.lastname,callback:function(t){e.$set(e.user,"lastname",t)},expression:"user.lastname"}}),r("v-text-field",{attrs:{name:"email",rules:e.emailRules,label:"E-mail",required:""},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),r("v-text-field",{attrs:{rules:"create"===e.actionType?e.passwordRules:[],name:"password",label:"Password",type:"password",required:"create"===e.actionType},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),"create"===e.actionType?r("v-btn",{staticClass:"mt-4 create-btn",attrs:{color:"success"},on:{click:e.submitForm}},[e._v(" Create Employee ")]):r("v-btn",{staticClass:"mt-4 create-btn",attrs:{color:"success"},on:{click:e.updateEmployee}},[e._v(" Update Employee ")])],1)],1)},i=[],s=r("5530"),n=(r("d3b7"),r("159b"),r("2f62")),o=r("8552"),u={data:function(){return{valid:!1,user:{firstname:"",lastname:"",email:"",password:""},actionType:"create",nameRules:[function(e){return!!e||"Name is required"}],emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],passwordRules:[function(e){return!!e||"Password is required"}]}},methods:Object(s["a"])(Object(s["a"])({},Object(n["b"])({createEmployeesAction:"createEmployeesAction",loadEmployeesAction:"loadEmployeesAction",updateEmployeesAction:"updateEmployeesAction"})),{},{submitForm:function(){var e=this;this.$refs.form.validate(),setTimeout((function(){if(!0===e.valid){o["a"].emitTriggerLoader(!0);var t=e.user;e.createEmployeesAction(t).then((function(){o["a"].emitTriggerSnackBar({type:"success",text:"New user Added"}),e.$router.push("/employees")})).catch((function(e){var t=e.response;t.data.errors?(console.log(t.data.errors),t.data.errors.errors.forEach((function(e){o["a"].emitTriggerSnackBar({type:"error",text:e.msg})}))):o["a"].emitTriggerSnackBar({type:"error",text:t.data.message})})).finally((function(){o["a"].emitTriggerLoader(!1)}))}}),100)},updateEmployee:function(){var e=this;this.$refs.form.validate(),setTimeout((function(){if(!0===e.valid){o["a"].emitTriggerLoader(!0);var t={id:e.user.id,payload:{firstname:e.user.firstname,lastname:e.user.lastname,email:e.user.email}};e.isValid(e.user.password)&&(t.payload.password=e.user.password),e.updateEmployeesAction(t).then((function(){o["a"].emitTriggerSnackBar({type:"success",text:"New user Added"}),e.$router.push("/employees")})).catch((function(e){var t=e.response;t.data.errors?(console.log(t.data.errors),t.data.errors.errors.forEach((function(e){o["a"].emitTriggerSnackBar({type:"error",text:e.msg})}))):o["a"].emitTriggerSnackBar({type:"error",text:t.data.message})})).finally((function(){o["a"].emitTriggerLoader(!1)}))}}),100)}}),mounted:function(){var e=this;"edit"===this.$route.query.action&&(o["a"].emitTriggerLoader(!0),this.actionType="edit",this.loadEmployeesAction(this.$route.query.id).then((function(t){e.user=t})).catch((function(t){var r=t.response;o["a"].emitTriggerSnackBar({type:"error",text:r.data.message}),e.$router.push("/employees")})).finally((function(){o["a"].emitTriggerLoader(!1)})))}},l=u,c=(r("045b"),r("2877")),d=r("6544"),m=r.n(d),f=r("8336"),p=r("4bd4"),h=r("8654"),v=Object(c["a"])(l,a,i,!1,null,"579ace60",null);t["default"]=v.exports;m()(v,{VBtn:f["a"],VForm:p["a"],VTextField:h["a"]})},"4bd4":function(e,t,r){"use strict";var a=r("5530"),i=(r("caad"),r("2532"),r("07ac"),r("4de4"),r("159b"),r("7db0"),r("58df")),s=r("7e2b"),n=r("3206");t["a"]=Object(i["a"])(s["a"],Object(n["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(e){var t=Object.values(e).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput:function(e){var t=this,r=function(e){return e.$watch("hasError",(function(r){t.$set(t.errorBag,e._uid,r)}),{immediate:!0})},a={_uid:e._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?a.shouldValidate=e.$watch("shouldValidate",(function(i){i&&(t.errorBag.hasOwnProperty(e._uid)||(a.valid=r(e)))})):a.valid=r(e),a},validate:function(){return 0===this.inputs.filter((function(e){return!e.validate(!0)})).length},reset:function(){this.inputs.forEach((function(e){return e.reset()})),this.resetErrorBag()},resetErrorBag:function(){var e=this;this.lazyValidation&&setTimeout((function(){e.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(e){return e.resetValidation()})),this.resetErrorBag()},register:function(e){this.inputs.push(e),this.watchers.push(this.watchInput(e))},unregister:function(e){var t=this.inputs.find((function(t){return t._uid===e._uid}));if(t){var r=this.watchers.find((function(e){return e._uid===t._uid}));r&&(r.valid(),r.shouldValidate()),this.watchers=this.watchers.filter((function(e){return e._uid!==t._uid})),this.inputs=this.inputs.filter((function(e){return e._uid!==t._uid})),this.$delete(this.errorBag,t._uid)}}},render:function(e){var t=this;return e("form",{staticClass:"v-form",attrs:Object(a["a"])({novalidate:!0},this.attrs$),on:{submit:function(e){return t.$emit("submit",e)}}},this.$slots.default)}})},"97b3":function(e,t,r){}}]);
//# sourceMappingURL=employeesform.1b95ef05.js.map